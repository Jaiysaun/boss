<!DOCTYPE html>
<meta charset="utf-8">
<title>BOSS API ReadMe</title>
<style>
	body {font-family:Helvetica,sans-serif;font-size:10pt;}
	h1 + p {text-align:center;}
	li {margin-bottom:10px;}
	li ul, li ol {margin-top:0.4em;}
	q {font-style:italic;}
	code {display:inline-block; padding:2px 5px; background:#eee;}
	td, th {border:1px solid #ddd; padding: 5px; vertical-align:top;}
	table {border-collapse:collapse; margin:1em;background:#FafaFf;}
	thead {font-weight:bold;background:#99CCFF;}
	code.box {line-height:20px; white-space:pre; margin:1em 0 0 3em; display:table; padding:5px 10px;}
	ol li ol {list-style:lower-alpha;}
	ol li ol li ol {list-style:lower-roman;}
 ol ol li {margin-bottom:0.2em;}
	blockquote {background:#E6E6FA; display:table; padding:5px 30px 5px 10px;}
	h1 {text-align:center;font-size:24pt;}
	h2 {margin-top:3em;font-size:20pt;}
	h3 {margin-top:2em;font-size:16pt;}
	h4 {margin-top:2em;font-size:12pt;}
	a:link {text-decoration:none;}
	a:hover {text-decoration:underline;}
	a[href^="http"]:after {padding-left:2px; content: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAVklEQVR4Xn3PgQkAMQhDUXfqTu7kTtkpd5RA8AInfArtQ2iRXFWT2QedAfttj2FsPIOE1eCOlEuoWWjgzYaB/IkeGOrxXhqB+uA9Bfcm0lAZuh+YIeAD+cAqSz4kCMUAAAAASUVORK5CYII=);}

	ul.errorMessages > li {margin-bottom:1.4em;}
	td.t {background:#90ff90;text-align:center;}
	td.c {background:#ff9090;text-align:center;}
	td.t:after {content: '\2713';}
	td.c:after {content: '\2717';}
	img {border:0;}
	.slideshow img {opacity:0;
		position:absolute;
		transition: opacity 1.5s;
		-moz-transition: opacity 1.5s;
		-webkit-transition: opacity 1.5s;
		-o-transition: opacity 1.5s;}
	.slideshow img:first-child {opacity:1;}
	figcaption {font-style:italic; margin-bottom:2em;}
	tr.inactive {color:#888;}
 tr.inactive td.c, tr.inactive td.t {background:#E3E3E3;}
	code.box {margin-left:0em;}
	span[title] {border-bottom: 1px dotted; font-family: sans-serif; cursor:help;}
	dt {margin-bottom:0.5em; margin-top:1em; font-style:italic;}
	dd {margin-bottom:0.8em;}
	abbr {cursor:help;}

	ul {margin-bottom:2em;}
</style>

<h1>BOSS API Readme</h1>
<h2>Contents</h2>
<ol>
	<li><a href="#intro">Introduction</a>
	<li><a href="#lo">Load Orders</a>
	<ol>
		<li><a href="#lo-intro">Introduction To Load Ordering</a>
		<li><a href="#lo-textfile">The Textfile-based Load Order Standard</a>
		<li><a href="#lo-bapi">Load Ordering With BOSS API</a>
	</ol>
	<li><a href="#types">Variable Types</a>
	<li><a href="#memory">Memory Management</a>
	<li><a href="#codes">API Codes</a>
	<ol>
		<li><a href="#codes-return">Return Codes</a>
		<li><a href="#codes-games">Game Codes</a>
		<li><a href="#codes-load">Load Order Method Codes</a>
		<li><a href="#codes-clean">Plugin Cleanliness Codes</a>
	</ol>
	<li><a href="#functions">Functions</a>
	<ol>
		<li><a href="#functions-error">Error Handling Functions</a>
		<li><a href="#functions-version">Version Functions</a>
		<li><a href="#functions-lifecycle">Lifecycle Management Functions</a>
		<li><a href="#functions-loading">Database Loading Functions</a>
		<li><a href="#functions-updating">Network Functions</a>
		<li><a href="#functions-activation">Plugin Activity Functions</a>
		<li><a href="#functions-sorting">Plugin Sorting Functions</a>
		<li><a href="#functions-access">Database Access Functions</a>
	</ol>
	<li><a href="#examples">Examples</a>
	<ol>
		<li><a href="#examples-c">C++</a>
	</ol>
	<li><a href="#contact">Contact</a>
	<li><a href="#contact">Credits</a>
	<li><a href="#license">License</a>
</ol>

<h2 id="intro">Introduction</h2>
<p>BOSS is a utility that helps mod users avoid serious conflicts by setting the mod plugins they have installed in their optimal load order. It also provides over 10,000 plugin-specific messages, including usage notes, requirements, incompatibilities, warnings on bugs and installation mistake notifications.
<p>The load order BOSS sets is decided by its <dfn>masterlist</dfn>, which lists all the plugins recognised by BOSS in their optimal load order, and contains the plugin-specific messages BOSS provides. Each game that BOSS supports has a separate masterlist, which are kept up to date via community submissions. Users can customise BOSS's positioning of plugins and the messages it displays using a <dfn>userlist</dfn> file. Each game has a separate userlist.</p><br />

<p>This documentation details the BOSS API (a.k.a. BAPI) and is intended for use by third party developers of modding utilities for TES III: Morrowind, TES IV: Oblivion, TES V: Skyrim, Nehrim - At Fate's Edge, Fallout 3 and Fallout: New Vegas.
<p>BAPI has a C frontend and is available as 32-bit and 64-bit DLLs that can be loaded by other modding utilities. BAPI currently has the following capabilities:
<ul>
	<li>Support for Morrowind, Oblivion, Nehrim, Skyrim, Fallout 3 and Fallout: New Vegas, including support for Skyrim's load order mechanism.
	<li>Get/Set the load order for all plugins.
	<li>Get/Set the active plugins.
	<li>Get/Set the load order position of individual plugins.
	<li>Get/Set the active/inactive status of individual plugins.
	<li>Get the filename of the plugin at a specific load order position.
 <li>Check whether a plugin is a master or not.
	<li>Auto-sort mods using BOSS's functionality.
	<li>Trial auto-sorting of mods using BOSS's functionality, outputting the sorted order without actually making any changes.
	<li>Create a slimmed-down BOSS masterlist containing only Bash Tag suggestions and dirty mod information.
	<li>Download the latest BOSS masterlists.
	<li>Extract dirty mod information from BOSS's masterlists.
	<li>Extract Bash Tag suggestions from BOSS masterlists and userlists, differentiating between those added and removed.
 <li>Extract all the messages attached to a plugin in a BOSS masterlist.
 <li>Submit unrecognised plugins for addition to BOSS's masterlists.
</ul>
<p>BAPI is intended as a full solution to the management of load order and plugin activation status across all supported games, freeing client utilities from the requirement to maintain their own code for those functions. The source code is available at <a href="https://github.com/boss-developers/boss">BOSS's code repository</a>. BAPI is licensed as part of BOSS under the GNU General Public License v3, see the main BOSS readme for more information.


<h2 id="lo">Load Orders</h2>
<h3 id="lo-intro">Introduction To Load Ordering</h3>
<p>Load ordering is the method used to determine how conflicts between mod plugins should be decided. If two plugins alter the same game data, then the changes made by the plugin loading later will override those made by the plugin loading earlier. This <em>rule of one</em> results in a list of plugins, with those earlier in the list having any conflicting changes overriden by those later in the list. This list is the load order of the plugins.
<p>A game will only load the plugins that are active. Up to 255 plugins, including the game's .esm file, can be active at any one time. Active plugins are listed in the game's <code>plugins.txt</code> file (or <code>Morrowind.ini</code>, in the case of Morrowind), which is stored in the user's local application data folder. Nevertheless, it is useful when working with load orders to consider the load order of all plugins, even if only some of them will actually be loaded. This is both because it is easier to display a single list of plugins than a list and an unordered set, and because modders have engineered methods that allow the changes made by inactive plugins to be loaded by another plugin (eg. <abbr title="Wrye Bash, Wrye Flash or Wrye Flash NV">Wrye *ash</abbr>'s Bashed Patch). When any such methods are being used, the load order of inactive plugins decides which plugins override others, similar to as if they were active.
<p>In Morrowind, Oblivion, Nehrim, Fallout 3, Fallout: New Vegas and early versions (pre-1.4.26) of Skyrim, load order is decided by the relative timestamps of plugins in the game's Data directory. An installed plugin's load order is therefore an intrinsic property of that plugin.
<p>In Skyrim v1.4.26+, a new textfile-based load order system was introduced, in which load order is decide by the order in which plugins are listed in <code>plugins.txt</code>. This brought with it a fundamental change, in that load order is no longer an intrinsic property of a plugin, and so inactive plugins do not have any load order.
<p><b>Note:</b> The games enforce one rule that overrides the load order of plugins set by either system. This rule is that <em>master files always load before all plugin files</em>. Simple enough, except that master files are not necessarily <code>.esm</code> files, and plugin files aren't necessarily <code>.esp</code> files. Whether a file is a master or a plugin depends on the value of a bit flag in the file itself, rather than its file extension. This also confuses terminology, so the usage in this readme is clarified below:
<ul>
	<li><var>plugin</var>: Any file with a <code>.esp</code> or <code>.esm</code> extension.
	<li><var>plugin file</var>: Any plugin with a bit flag value such that it always loads after plugins with the other bit flag value.
	<li><var>master</var> or <var>master file</var>: Any plugin with a bit flag value such that it loads before plugins with the other bit flag value.
	<li><var>ghosted plugin</var>: Any plugin that has had a <code>.ghost</code> extension appended to its filename.
</ul>

<h3 id="lo-textfile">The Textfile-based Load Order Standard</h3>
<p>As the load order of all plugins, not just inactive plugins, is important, a standard solution that would allow ordering of inactive plugins was decided by Lojack (Wrye Bash), Kaburke (Nexus Mod Manager), WrinklyNinja (BOSS) and Dark0ne (owner of the Nexus sites) that could serve the community's needs. The BOSS API contains the canonical implementation of this standard.
<p>The standard dictates that:
<ul>
	<li>Active load order is stored in <code>plugins.txt</code>.
	<li><code>plugins.txt</code> is encoded in Windows-1252.
	<li><code>plugins.txt</code> is by default stored in the user's local application data folder, eg. <code>C:\Users\WrinklyNinja\AppData\Local\Skyrim\plugins.txt</code> on Windows Vista/7.
	<li>Total load order is stored in a <code>loadorder.txt</code> file.
	<li><code>loadorder.txt</code> is encoded in UTF-8, <strong>without</strong> a Byte Order Mark.
	<li><code>loadorder.txt</code> is stored alongside the <code>plugins.txt</code>, in whichever location that is.
	<li>Both <code>plugins.txt</code> and <code>loadorder.txt</code> contain only a list of plugin filenames (files with <code>.esp</code> or <code>.esm</code> extensions), one per line.
	<li>In both <code>plugins.txt</code> and <code>loadorder.txt</code>, master files are listed before plugin files.
	<li>Both <code>plugins.txt</code> and <code>loadorder.txt</code> are to be kept in synchronisation with one another: when one file is changed, the other must also be changed in the same manner (unless the change is not applicable, eg. deactivating a plugin doesn't change the contents of <code>loadorder.txt</code>).
</ul>
<p>There are some circumstances that produce scenarios in which the behaviour of utilities is not defined. These are detailed in the table below.
<table>
	<thead><tr><th>Circumstance<th>Recommended Behaviour<th>BOSS API Behaviour
	<tbody>
		<tr><td>An attempt is made to activate a plugin with a filename that cannot be represented in the Windows-1252 encoding.<td>Utilities check that filename strings are encoded correctly before outputting them. On a failure to convert to the correct encoding, the user should be alerted that the plugin in question cannot be activated.<td>BAPI attempts to convert the filename string, fails and returns a warning code with an associated string containing the filename in question to the client, after performing whatever other processing that was required by the function the client called. The client is then free to decide on the action taken.
		<tr><td>The <q>plugins.txt</q> and <q>loadorder.txt</q> files become unsynchronised.<td>Utilities check for synchronisation on startup and maintain it throughout their operation, rather than re-synchronising the files on program close, for instance. This is to prevent issues for any other programs open at the same time. If desynchronisation is detected, the only standard-based recovery option is to derive <q>plugins.txt</q> from <q>loadorder.txt</q>, first getting a list of filenames to be written from <q>plugins.txt</q>. Alternatively, a utility could use some internal load order backup to restore from. See the coloured box below for a more detailed breakdown of the issue.<td>BAPI detects loss of synchronisation when a database is created and returns a warning code to the client after creating the database. The client is then free to decide on the action taken.
		<tr><td>For one reason or another, a plugin becomes listed twice in <code>loadorder.txt</code>.<td>Utilities use the earliest-listed instance of that plugin, as this is most likely to be correct.<td>The API ignores all but the earliest-listed instance of a plugin, neither operating on or returning any other instance.
</table>
<blockquote><i>The Desynchronisation Problem</i>
<p>If either <code>plugins.txt</code> or <code>loadorder.txt</code> are changed such that the load order of the plugins in <code>plugins.txt</code> is not the same in <code>plugins.txt</code> and <code>loadorder.txt</code>, then the difference cannot generally be precisely resolved without discarding one file's ordering. This is due to the load order of plugins in plugins.txt being weakly defined, ie. it is defined relative to other active plugins, but not in relation to inactive plugins. An example:
<blockquote>
If you use the API to set a load order of A,b,c,d,E,f,g where uppercase letters denote active plugins, then you use the Skyrim launcher to move A after E, then <code>plugins.txt</code> will read E,A while <code>loadorder.txt</code> remains unchanged. There is no way of knowing from the contents of plugins.txt whether you moved A after E or E before A. If these were the only two plugins, then it would not be an issue, but you also have inactive plugins interspersed amongst them, so you have the following possibilities, all of which are potentially valid, but also potentially damaging in terms of conflicts, etc.:
<blockquote>
b,c,d,E,A,f,g<br />
b,c,d,E,f,A,g<br />
b,c,d,E,f,g,A<br />
E,A,b,c,d,f,g
</blockquote>
There is no way of knowing which is the correct order to choose for the full load order based on the active load order. You must therefore choose to use one of the two files' orderings. Since <code>plugins.txt</code> does not define the load order positions of inactive plugins, it is unsuitable, and <code>loadorder.txt</code> must be used. The alternative would be for a utility to restore load order from their own internal backup, hence why the standard does not define a specific behaviour, as it may be <code>loadorder.txt</code> that was altered and is now wrong.
</blockquote>
</blockquote>
<h3 id="lo-bapi">Load Ordering with BOSS API</h3>
<p>BAPI's implementation of load ordering support presents one set of functions that handle the differences between timestamp-based and textfile-based load ordering opaquely, so there is no difference in usage for clients. It is fully compatible with the community standard for textfile-based load ordering, handling all requirements internally.
<p>In addition, BAPI also handles the following:
<ul>
	<li>Ghosted plugins: Wrye Bash has the option to <q>ghost</q> inactive plugins by appending a <code>.ghost</code> extension to the filename. This reduces the effect of a bug in several supported games known as <q>directory thrashing</q>, which can lead to significant performance hits. BAPI treats ghosted plugins like normal plugins, and accepts their unghosted filenames in its function parameters, so the client doesn't need to keep track of their ghosted status. BAPI will also automatically unghost any plugins that are activated through its interface.
	<li><code>Skyrim.esm</code> &amp; <code>Update.esm</code>: These two Skyrim plugins are special cases, as they are always loaded by the game. However, if <code>Update.esm</code> is not included in <code>plugins.txt</code>, it is loaded after any other active master files. BAPI handles the special treatment of Skyrim.esm and Update.esm for the client, ensuring that they can never be deactivated and that <code>Update.esm</code> is always explicitly loaded in <code>plugins.txt</code>, either at the client's specified position or after other master files.
	<li>Game master file position: BAPI validates any input to its load order setting functions to ensure that the game's master file is always loaded first.
	<li>Masters before plugin files: BAPI validates any input to its load order setting functions to ensure that they will always set load orders to reflect the games' rule that master files always load before plugin files.
	<li>Encoding conversion: In order to be most widely applicable, BAPI works in the UTF-8 character encoding, using it internally and for all its inputs and outputs. However, the games it supports specify that the active load order must be specified in a file encoded in Windows-1252. BAPI handles the encoding conversions between this encoding and UTF-8 internally, and warns the client when they have tried to activate a plugin whose filename cannot be represented in the Windows-1252 encoding.
</ul>


<h2 id="types">Variable Types</h2>
<p>The API uses character strings and integers for information input/output.
<ul>
	<li>All strings are unsigned 8-bit character strings (uint8_t*) encoded in UTF-8 and are null-terminated.
	<li>All codes are unsigned 32-bit integers (uint32_t).
	<li>All array sizes and positions use the unsigned data type size_t.
	<li>File paths are case-sensitive if the underlying file system is case-sensitive.
</ul>
<p>The API also introduces three new structures:
<code class="box" id="boss_db">typedef struct _boss_db_int * boss_db;</code>
<p>The boss_db structure abstracts the definition of BOSS's internal state while still providing type safety across the API.

<code class="box" id="BashTag">typedef struct {
    uint32_t id;
    const uint8_t * name;
} BashTag;</code>
<p>The BashTag structure gives the Unique Identifier (UID) for each Bash Tag and the corresponding Bash Tag name.

<code class="box" id="BossMessage">typedef struct {
	uint32_t type;
	const uint8_t * message;
} BossMessage;</code>
<p>The BossMessage structure gives the type of a message and the message string itself.

<h2 id="memory">Memory Management</h2>
<p>BAPI manages the memory of strings and arrays it returns internally, so such strings and arrays should not be deallocated by the client.
<p>A string/array returned by a function lasts until a BAPI function is called which returns data of the same type (eg. a string is stored until the client calls another function which returns a string, an integer array lasts until another integer array is returned, etc.).
<p>Strings and arrays may also be deallocated by calling <a href="#Load">Load</a> or <a href="#DestroyBossDb">DestroyBossDb</a>. <a href="#DestroyBossDb">DestroyBossDb</a> also destroys the database passed as its argument.
<p>The two exceptions to the above are the strings returned by <a href="#GetLastErrorDetails">GetLastErrorDetails</a> and <a href="#GetVersionString">GetVersionString</a>, which exist independently of each other and strings returned by other functions. A string returned by one of these two functions lasts until that function is called again, or until <a href="#CleanUpAPI">CleanUpAPI</a> is called.


<h2 id="codes">API Codes</h2>
<h3 id="codes-return">Return Codes</h3>
<p>The BOSS API functions uses the following uint32_t return codes to signal how a function completes. WARN return codes signify a problem that did not cause the function to exit prematurely, whereas ERROR return codes signify issues that did cause the function to exit prematurely.
<table>
	<thead><tr><th>Return Code<th>Description
	<tbody>
		<tr><td>BOSS_API_OK								<td>The function completed successfully.
		<tr><td>BOSS_API_OK_NO_UPDATE_NECESSARY			<td>No update was found for the masterlist.
		<tr><td>BOSS_API_WARN_BAD_FILENAME				<td>The plugin filename contains characters that do not have Windows-1251/1252 code points. The plugin cannot be activated.
		<tr><td>BOSS_API_WARN_LO_MISMATCH				<td>The order of plugins in <q>plugins.txt</q> and their order in <q>loadorder.txt</q> does not match. This is due to something (eg. the Skyrim launcher) editing one file without sychronising the other. Synchronisation is automatic when load order is managed through BAPI.
		<tr><td>BOSS_API_ERROR_FILE_WRITE_FAIL			<td>A file could not be written to.
		<tr><td>BOSS_API_ERROR_FILE_DELETE_FAIL			<td>A file could not be deleted.
		<tr><td>BOSS_API_ERROR_FILE_NOT_UTF8			<td>The specified BOSS file (masterlist or userlist) is not encoded in UTF-8.
		<tr><td>BOSS_API_ERROR_FILE_NOT_FOUND			<td>The specified file could not be found.
		<tr><td>BOSS_API_ERROR_FILE_RENAME_FAIL	<td>A file could not be renamed.
		<tr><td>BOSS_API_ERROR_TIMESTAMP_READ_FAIL		<td>The modification date of a file could not be read.
		<tr><td>BOSS_API_ERROR_TIMESTAMP_WRITE_FAIL		<td>The modification date of a file could not be set.
		<tr><td>BOSS_API_ERROR_PARSE_FAIL				<td>There was an error parsing the file.
		<tr><td>BOSS_API_ERROR_CONDITION_EVAL_FAIL		<td>There was an error evaluating the conditionals in the masterlist.
		<tr><td>BOSS_API_ERROR_REGEX_EVAL_FAIL			<td>There was an error evaluating the regular expressions in the masterlist.
		<tr><td>BOSS_API_ERROR_NO_MEM					<td>The API was unable to allocate the required memory.
		<tr><td>BOSS_API_ERROR_INVALID_ARGS				<td>Invalid arguments were given for the function.
		<tr><td>BOSS_API_ERROR_NETWORK_FAIL				<td>There was an error in an Internet-related operation.
		<tr><td>BOSS_API_ERROR_NO_INTERNET_CONNECTION	<td>No Internet connection detected.
		<tr><td>BOSS_API_ERROR_NO_TAG_MAP				<td>No Bash Tag map has been generated yet. <a href="#GetBashTagMap">GetBashTagMap</a> must be run before <a href="#GetModBashTags">GetModBashTags</a> to build the Bash Tag map.
		<tr><td>BOSS_API_ERROR_PLUGINS_FULL				<td>Writing the specified plugins to <q>plugins.txt</q> would bring the number of active plugins over 255, which is the maximum allowed.
		<tr><td>BOSS_API_ERROR_GAME_NOT_FOUND			<td>The specified game could not be found.
		<tr><td>BOSS_API_RETURN_MAX						<td>Matches the value of the highest-numbered return code. It isn't returned by any functions.
</table>
<h3 id="codes-game">Game Codes</h3>
<p>The following uint32_t codes are used by <a href="#CreateBossDb">CreateBossDb</a> to specify which game the API is acting for, in cases where distinctions between games are necessary.
<table>
	<thead><tr><th>Game Code<th>Game
	<tbody>
		<tr><td>BOSS_API_GAME_OBLIVION	<td>The Elder Scrolls IV: Oblivion
		<tr><td>BOSS_API_GAME_FALLOUT3	<td>Fallout 3
		<tr><td>BOSS_API_GAME_FALLOUTNV	<td>Fallout: New Vegas
		<tr><td>BOSS_API_GAME_NEHRIM	<td>Nehrim - At Fate's Edge
		<tr><td>BOSS_API_GAME_SKYRIM	<td>The Elder Scrolls V: Skyrim
		<tr><td>BOSS_API_GAME_MORROWIND	<td>The Elder Scrolls III: Morrowind
</table>
<h3 id="codes-load">Load Order Method Codes</h3>
<p>The following codes are used by <a href="#GetLoadOrderMethod">GetLoadOrderMethod</a> to signify which load order system BAPI is running for.
<table>
	<thead><tr><th>Load Order Method Code<th>Description
	<tbody>
		<tr><td>BOSS_API_LOMETHOD_TIMESTAMP<td>The API is running for a game which uses the timestamp-based load order system. Oblivion, Fallout 3, Fallout: New Vegas all use this system, as does pre-v1.4.26 Skyrim.
		<tr><td>BOSS_API_LOMETHOD_TEXTFILE<td>The API is running for a game which uses the textfile-based load order system. Skyrim v1.4.26+ uses this system.
</table>
<h3 id="codes-clean">Plugin Cleanliness Codes</h3>
<p>The following codes are returned by <a href="#GetDirtyMessage">GetDirtyMessage</a> to signify the cleanliness status of the plugin passed to the function.
<table>
	<thead><tr><th>Plugin Cleanliness Code<th>Description
	<tbody>
		<tr><td>BOSS_API_CLEAN_NO<td>The plugin does not need cleaning or should not be cleaned.
		<tr><td>BOSS_API_CLEAN_YES<td>The plugin needs cleaning.
		<tr><td>BOSS_API_CLEAN_UNKNOWN<td>BOSS does not know whether the plugin needs cleaning or not, or if it should not be cleaned.
</table>
<h3 id="codes-messages">Message Type Codes</h3>
<p>The following codes are used in the <a href="#BossMessage">BossMessage</a> data structure to signify what type of message a particular message is.
<table>
	<thead><tr><th>Message Type Code<th>Description
	<tbody>
		<tr><td>BOSS_API_MESSAGE_SAY<td>A general message.
		<tr><td>BOSS_API_MESSAGE_TAG<td>A Bash Tag suggestion or suggestions.
		<tr><td>BOSS_API_MESSAGE_REQUIREMENT<td>An installation requirement or requirements.
		<tr><td>BOSS_API_MESSAGE_INCOMPATIBILITY<td>An incompatibility or incompatibilities.
		<tr><td>BOSS_API_MESSAGE_DIRTY<td>A message about dirty edits.
		<tr><td>BOSS_API_MESSAGE_WARN<td>A warning message.
		<tr><td>BOSS_API_MESSAGE_ERROR<td>An error message.
</table>



<h2 id="functions">Functions</h2>
<p>BOSS API provides the functions listed below to clients. Where a function returns a uint32_t value, this is the function's return code.

<h3 id="functions-error">Error Handling Functions</h3>
<dfn id="GetLastErrorDetails">GetLastErrorDetails</dfn> - Outputs a string giving the details of the last time an error or warning return code was returned by a function.
<code class="box">uint32_t <a href="#GetLastErrorDetails">GetLastErrorDetails</a> (uint8_t ** <var>details</var>);</code>
<ul>
	<li><var>details</var> - A pointer to the error details string outputted by the function.
</ul>

<h3 id="functions-version">Version Functions</h3>
<dfn id="IsCompatibleVersion">IsCompatibleVersion</dfn> - Returns whether this version of BOSS supports the API from the given BOSS version. Abstracts BOSS API stability policy away from clients.
<code class="box">bool <a href="#IsCompatibleVersion">IsCompatibleVersion</a> (const uint32_t bossVersionMajor, const uint32_t bossVersionMinor, const uint32_t bossVersionPatch);</code>
<ul>
	<li><var>bossVersionMajor</var> - The major version number (<b>major</b>.minor.patch) of the API version the client's code was written for.
	<li><var>bossVersionMinor</var> - The minor version number (major.<b>minor</b>.patch) of the API version the client's code was written for.
	<li><var>bossVersionPatch</var> - The patch version number (major.minor.<b>patch</b>) of the API version the client's code was written for.
</ul>

<dfn id="GetVersionString">GetVersionString</dfn> - Returns the version string for the loaded version of the BOSS API.
<code class="box">uint32_t <a href="#GetVersionString">GetVersionString</a> (uint8_t ** bossVersionStr);</code>
<ul>
	<li><var>bossVersionStr</var> - A pointer to the version string outputted by the function.
</ul>

<h3 id="functions-lifecycle">Lifecycle Management Functions</h3>
<dfn id="CreateBossDb">CreateBossDb</dfn> - Creates a database for one of the games supported by the API, and sets the path to the Data directory for that game. It then checks that the game's master file exists at that location. If the <var>clientGame</var> uses the textfile-based load order system, this function also checks that plugins.txt and loadorder.txt are in sync, provided that they both exist.  You can create multiple databases.
<code class="box">uint32_t <a href="#CreateBossDb">CreateBossDb</a> (boss_db * db, const uint32_t clientGame, const uint8_t * dataPath);</code>
<ul>
	<li><var>db</var> - A pointer to the database created by the function.
	<li><var>clientGame</var> - A game code specifying which game to create the database for.
	<li><var>dataPath</var> - A string containing the relative or absolute path to the Data folder for the game specified by <var>clientGame</var>. If <code>NULL</code> or empty, the API attempts to detect the path of the game by scanning sibling folders of the working directory and by scanning the Windows Registry for an install path key.
</ul>

<dfn id="DestroyBossDb">DestroyBossDb</dfn> - Explicitly manage a database's lifetime. Allows clients to free memory when they want/need to. Destroys the given DB, freeing any memory allocated as part of its use.
<code class="box">void <a href="#DestroyBossDb">DestroyBossDb</a> (boss_db db);</code>
<ul>
	<li><var>db</var> - The database to be destroyed.
</ul>

<dfn id="CleanUpAPI">CleanUpAPI</dfn> - Frees memory allocated to the strings returned by <a href="#GetVersionString">GetVersionString</a> and <a href="#GetLastErrorDetails">GetLastErrorDetails</a>.
<code class="box">void <a href="#CleanUpAPI">CleanUpAPI</a> ();</code>

<h3 id="functions-loading">Database Loading Functions</h3>

<dfn id="Load">Load</dfn> - Loads the masterlist and userlist from the paths specified, for the game specified when the given database was created. Can be called multiple times. If an error is encountered, the database remains unchanged. Calling this function for a database that has already been loaded will reload it, freeing any memory allocated by functions that take a <code>boss_db</code> argument, and scanning the data directory specified when the database was created for newly added plugins.
<code class="box">uint32_t <a href="#Load">Load</a> (boss_db db, const uint8_t * masterlistPath, const uint8_t * userlistPath);</code>
<ul>
	<li><var>db</var> - The database the function acts on.
	<li><var>masterlistPath</var> - A string containing the relative or absolute path to the masterlist file that should be loaded.
	<li><var>userlistPath</var> - A string containing the relative or absolute path to the userlist file that should be loaded. If <code>NULL</code>, no userlist will be loaded.
</ul>

<dfn id="EvalConditionals">EvalConditionals</dfn> - Evaluates all conditional lines and regex mods in the loaded masterlist. This exists so that <a href="#Load">Load</a> doesn't need to be called whenever the mods installed are changed. Evaluation does not take place unless this function is called. Repeated calls re-evaluate the masterlist from scratch each time, ignoring the results of any previous evaluations. This function affects the results of <a href="#GetBashTagMap">GetBashTagMap</a>, <a href="#GetModBashTags">GetModBashTags</a> and <a href="#GetDirtyMessage">GetDirtyMessage</a>.
<code class="box">uint32_t <a href="#EvalConditionals">EvalConditionals</a> (boss_db db);</code>
<ul>
	<li><var>db</var> - The database the function acts on.
</ul>

<h3 id="functions-updating">Network Functions</h3>
<p>These functions require a database to be created, but do not require <a href="#SortMods">Load</a> to have been called, apart from <a href="#SetProxy">SetProxy</a>, which does not require a database to be created.</p>

<dfn id="SetProxy">SetProxy</dfn> - Sets the proxy settings for BAPI globally, so that all subsequent BAPI network function calls are affected until SetProxy is called again or BAPI is unloaded.
<code class="box">uint32_t <a href="#SetProxy">SetProxy</a> (const uint8_t * hostname, const uint32_t port, const uint8_t * username, const uint8_t * password);</code>
<ul>
	<li><var>hostname</var> - A string containing the hostname for the proxy host used. If set to <code>NULL</code>, no proxy will be used, allowing clients to unset a previously set proxy.
	<li><var>port</var> - The port used to connect to the proxy host. If set to <code>0</code>, no proxy will be used, allowing clients to unset a previously set proxy.
	<li><var>username</var> - A string containing the username used to connect to the Internet through an authenticated proxy. If no authentication is required, this should be <code>NULL</code>
	<li><var>password</var> - A string containing the password ued to connect to the Internet through an authenticated proxy. If no authentication is required, this should be <code>NULL</code>
</ul>

<dfn id="UpdateMasterlist">UpdateMasterlist</dfn> - Updates the masterlist at masterlistPath to the latest version of the masterlist for the game specified when the given database was created. If there is no masterlist present, then the latest masterlist will be downloaded to masterlistPath. If the local masterlist is already at the latest version, no masterlist is downloaded.
<code class="box">uint32_t <a href="#UpdateMasterlist">UpdateMasterlist</a> (boss_db db, const uint8_t * masterlistPath);</code>
<ul>
	<li><var>db</var> - The database the function acts on.
	<li><var>masterlistPath</var> - A string containing the relative or absolute path to the masterlist file that should be created or updated.
</ul>

<dfn id="SubmitUnrecognisedPlugin">SubmitUnrecognisedPlugin</dfn> - Submits the given plugin as unrecognised to BOSS's unrecognised plugin tracker, using the same method as the BOSS Log plugin submitter. Whether or not the plugin is actually unrecognised is not checked, but recognised plugin submissions will be ignored and slow down the addition of unrecognised plugin that are submitted, so recognised plugins should not be submitted. Either <var>link</var> or <var>info</var> can be <code>NULL</code>, but not both. If <var>link</var> is <code>NULL</code>, load order suggestions and detail on what the plugin does is crucial for addition to the masterlist.
<code class="box">uint32_t <a href="#SubmitUnrecognisedPlugin">SubmitUnrecognisedPlugin</a> (boss_db db, const uint8_t * plugin, const uint8_t * link, const uint8_t * info);</code>
<ul>
	<li><var>db</var> - The database the function acts on.
	<li><var>plugin</var> - A string containing the filename of the plugin to be submitted.
	<li><var>link</var> - A string containing a valid URL to the plugin's download location.
	<li><var>info</var> - A string containing additional information about the plugin, such as recommended Bash Tags, load order suggestions, ITM/UDR counts and dirty CRCs.
</ul>

<h3 id="functions-activation">Plugin Activity Functions</h3>
<p>These functions require a database to be created, but do not require <a href="#SortMods">Load</a> to have been called. Plugins should be passed with their unghosted filenames, whether or not they are currently ghosted.</p>

<dfn id="GetActivePlugins">GetActivePlugins</dfn> - Returns the contents of plugins.txt.
<code class="box">uint32_t <a href="#GetActivePlugins">GetActivePlugins</a> (boss_db db, uint8_t *** plugins, size_t * numPlugins);</code>
<ul>
	<li><var>db</var> - The database the function acts on.
	<li><var>plugins</var> - The outputted array of active plugins. If the textfile-base load order system is being used, these plugins will be in load order, otherwise their order is undefined. If <var>numPlugins</var> is 0, this will be <code>NULL</code>.
	<li><var>numPlugins</var> - The size of the outputted <var>plugins</var> array.
</ul>

<dfn id="SetActivePlugins">SetActivePlugins</dfn> - Replace the current contents of plugins.txt with the given plugins.
<code class="box">uint32_t <a href="#SetActivePlugins">SetActivePlugins</a> (boss_db db, uint8_t ** plugins, const size_t numPlugins);</code>
<ul>
	<li><var>db</var> - The database the function acts on.
	<li><var>plugins</var> - The inputted array of plugins to be made active. If the textfile-base load order system is being used, these plugins will be written in load order, otherwise they are written as ordered in the array. If running for Skyrim and Update.esm is not in the array, it will be inserted after the last master file in the array.
	<li><var>numPlugins</var> - The size of the <var>plugins</var> array.
</ul>

<dfn id="IsPluginActive">IsPluginActive</dfn> - Checks to see if the given plugin is listed in plugins.txt.
<code class="box">uint32_t <a href="#IsPluginActive">IsPluginActive</a> (boss_db db, const uint8_t * plugin, bool * isActive);</code>
<ul>
	<li><var>db</var> - The database the function acts on.
	<li><var>plugin</var> - A string containing the filename of the plugin to check the active/inactive status of.
	<li><var>isActive</var> - A pointer to the boolean output. The output is <code>true</code> if the plugin is active, and <code>false</code> otherwise.
</ul>

<dfn id="SetPluginActive">SetPluginActive</dfn> - If active is true, adds the plugin to plugins.txt in its load order if it is not already present. If active is false, removes the plugin from plugins.txt if it is present. If activating a plugin that is ghosted, the <code>.ghost</code> extension is removed.
<code class="box">uint32_t <a href="#SetPluginActive">SetPluginActive</a> (boss_db db, const uint8_t * plugin, const bool active);</code>
<ul>
	<li><var>db</var> - The database the function acts on.
	<li><var>plugin</var> - A string containing the filename of the plugin to change the active/inactive status of. If running for Skyrim, Skyrim.esm and Update.esm may not be deactivated.
	<li><var>active</var> - Whether to activate or deactivate the plugin. If <code>true</code>, then the plugin is activated if it is not already active. If <code>false</code>, the plugin is deactivated unless it is already inactive.
</ul>

<h3 id="functions-sorting">Plugin Sorting Functions</h3>
<p>These functions require a database to be created, but only <a href="#SortMods">SortMods</a> requires <a href="#SortMods">Load</a> to have been called. Plugins should be passed with their unghosted filenames, whether or not they are currently ghosted.</p>

<dfn id="GetLoadOrderMethod">GetLoadOrderMethod</dfn> - Returns which method BOSS is using for the load order.
<code class="box">uint32_t <a href="#GetLoadOrderMethod">GetLoadOrderMethod</a> (boss_db db, uint32_t * method);</code>
<ul>
	<li><var>db</var> - The database the function acts on.
	<li><var>method</var> - The load order method code returned for the load order system that is being used by the database <var>db</var>.
</ul>

<dfn id="SortMods">SortMods</dfn> - Sorts the mods for the database's game, using the masterlist loaded by <a href="#load">Load</a>. Outputs a list of plugins in their new load order. If <var>trialOnly</var> is <code>false</code>, then <var>sortedPlugins</var>, <var>sortedListLength</var>, <var>unrecognisedPlugins</var> and <var>unrecListLength</var> can either all be valid pointers, or can all be <code>NULL</code>.
<code class="box">uint32_t <a href="#SortMods">SortMods</a> (boss_db db, const bool trialOnly, uint8_t *** sortedPlugins, size_t * sortedListLength, uint8_t *** unrecognisedPlugins, size_t * unrecListLength);</code>
<ul>
	<li><var>db</var> - The database the function acts on.
	<li><var>trialOnly</var> - If true, the function only outputs how BOSS would sort the order without actually making any load order changes.
	<li><var>sortedPlugins</var> - A pointer to the outputted array of plugins in their new load order. If the API encounters duplicate plugin filenames (possible with the textfile-based load order system), it will discard all but the copy highest in the load order. If <var>sortedListLength</var> is 0, this will be <code>NULL</code>.
	<li><var>sortedListLength</var> - A pointer to the outputted size of the <var>sortedPlugins</var> array.
	<li><var>unrecognisedPlugins</var> - A pointer to an array of plugins that were not recognised by BOSS in their new load order. All the plugins in this array are also in <var>sortedPlugins</var>, this is a subset of plugins rather than an independent set. If <var>unrecListLength</var> is 0, this will be <code>NULL</code>.
	<li><var>unrecListLength</var> - A pointer to the outputted size of the <var>unrecognisedPlugins</var> array.
</ul>

<dfn id="GetLoadOrder">GetLoadOrder</dfn> - Outputs a list of installed plugins in load order.
<code class="box">uint32_t <a href="#GetLoadOrder">GetLoadOrder</a> (boss_db db, uint8_t *** plugins, size_t * numPlugins);</code>
<ul>
	<li><var>db</var> - The database the function acts on.
	<li><var>plugins</var> - A pointer to the outputted array of plugins in load order. If the API encounters duplicate plugin filenames (possible with the textfile-based load order system), it will discard all but the copy highest in the load order. If <var>numPlugins</var> is 0, this will be <code>NULL</code>.
	<li><var>numPlugins</var> - A pointer to the outputted size of the <var>plugins</var> array.
</ul>

<dfn id="SetLoadOrder">SetLoadOrder</dfn> - Sets the load order to the passed plugin array, then scans the Data directory and appends any plugins not included in the passed array to the end of the new load order. Only the game's master file may be positioned at the top of the load order. If the client game is Skyrim, then only <code>Update.esm</code> may be positioned in the second position from the top of the load order.
<code class="box">uint32_t <a href="#SetLoadOrder">SetLoadOrder</a> (boss_db db, uint8_t ** plugins, const size_t numPlugins);</code>
<ul>
	<li><var>db</var> - The database the function acts on.
	<li><var>plugins</var> - The inputted array of plugins in their new load order. This order must obey the <q>masters before plugin files</q> rule, and no master may be positioned before the game's master file.
	<li><var>numPlugins</var> - The size of the <var>plugins</var> array.
</ul>

<dfn id="GetPluginLoadOrder">GetPluginLoadOrder</dfn> - Gets the load order position of the specified plugin.
<code class="box">uint32_t <a href="#GetPluginLoadOrder">GetPluginLoadOrder</a> (boss_db db, const uint8_t * plugin, size_t * index);</code>
<ul>
	<li><var>db</var> - The database the function acts on.
	<li><var>plugin</var> - A string containing the filename of the plugin to get the load order of.
	<li><var>index</var> - A pointer to the outputted load order index of the inputted plugin. The index of the plugin at the top of the load order is 0.
</ul>

<dfn id="SetPluginLoadOrder">SetPluginLoadOrder</dfn> - Sets the load order of the specified plugin, moving it from its current position. Only the game's master file may be positioned at the top of the load order. If the client game is Skyrim, then only <code>Update.esm</code> may be positioned in the second position from the top of the load order.
<code class="box">uint32_t <a href="#SetPluginLoadOrder">SetPluginLoadOrder</a> (boss_db db, const uint8_t * plugin, const size_t index);</code>
<ul>
	<li><var>db</var> - The database the function acts on.
	<li><var>plugin</var> - A string containing the filename of the plugin to set the load order of.
	<li><var>index</var> - The load order index to be set for the inputted plugin. The index of the plugin at the top of the load order is 0. If the index specified is greater than the number of plugins in the load order, the plugin will be inserted at the end of the load order. The order set must obey the <q>masters before plugin files</q> rule, and no master may be positioned before the game's master file.
</ul>

<dfn id="GetIndexedPlugin">GetIndexedPlugin</dfn> - Get what plugin is at the specified load order position. The first position in the load order is 0.
<code class="box">uint32_t <a href="#GetIndexedPlugin">GetIndexedPlugin</a> (boss_db db, const size_t index, uint8_t ** plugin);</code>
<ul>
	<li><var>db</var> - The database the function acts on.
	<li><var>index</var> - The load order index to be looked at. The index of the plugin at the top of the load order is 0.
	<li><var>plugin</var> - A pointer to the outputted filename of the plugin at <var>index</var> in the load order.
</ul>

<dfn id="IsPluginMaster">IsPluginMaster</dfn> - Check if a plugin is a master file or not. This function checks the value of the internal master bit flag, not the file extension, as is correct. The file extension doesn't define whether a plugin is a master or not.
<code class="box">uint32_t <a href="#IsPluginMaster">IsPluginMaster</a> (boss_db db, const uint8_t * plugin, bool * isMaster);</code>
<ul>
	<li><var>db</var> - The database the function acts on.
	<li><var>plugin</var> - A string containing the filename of the plugin to check the master bit flag value of.
	<li><var>isMaster</var> - A pointer to the boolean output. The output is <code>true</code> if the plugin is a master, and <code>false</code> otherwise.
</ul>


<h3 id="functions-access">Database Access Functions</h3>

<dfn id="GetBashTagMap">GetBashTagMap</dfn> - Returns an array of the Bash Tags encountered when loading the masterlist and userlist. This function must be called prior to calling <a href="#GetModBashTags">GetModBashTags</a>, to ensure that the Bash Tag map exists so that <a href="#GetModBashTags">GetModBashTags</a> may return the Tags found using the correct UIDs.
<code class="box">uint32_t <a href="#GetBashTagMap">GetBashTagMap</a> (boss_db db, BashTag ** tagMap, size_t * numTags);</code>
<ul>
	<li><var>db</var> - The database the function acts on.
	<li><var>tagMap</var> - A pointer to the outputted array of <a href="#BashTag">BashTag</a> structures. <code>NULL</code> if no Bash Tags are encountered.
	<li><var>numTags</var> - A pointer to the size of the <var>tagMap</var> array. 0 if <var>tagMap</var> is <code>NULL</code>.
</ul>

<dfn id="GetModBashTags">GetModBashTags</dfn> - Returns arrays of Bash Tag UIDs for Bash Tags suggested for addition and removal by BOSS's masterlist and userlist. <a href="#GetBashTagMap">GetBashTagMap</a> must be called before calling this function in order to assign UIDs to Bash Tags.
<code class="box">uint32_t <a href="#GetModBashTags">GetModBashTags</a> (boss_db db, const uint8_t * modName, uint32_t ** tagIds_added, size_t * numTags_added, uint32_t **tagIds_removed, size_t *numTags_removed, bool * userlistModified);</code>
<ul>
	<li><var>db</var> - The database the function acts on.
	<li><var>modName</var> - A string containing the filename of the plugin to look up Bash Tag suggestions for.
	<li><var>tagIds_added</var> - A pointer to the outputted array of UIDs of the Bash Tags suggested for addition to the specified plugin. <code>NULL</code> if no Bash Tag additions are suggested.
	<li><var>numTags_added</var> - A pointer to the size of the <var>tagIds_added</var> array. 0 if <var>tagIds_added</var> is <code>NULL</code>.
	<li><var>tagIds_removed</var> - A pointer to the outputted array of UIDs of the Bash Tags suggested for removal from the specified plugin. <code>NULL</code> if no Bash Tag removals are suggested.
	<li><var>numTags_removed</var> - A pointer to the size of the <var>tagIds_removed</var> array. 0 if <var>tagIds_removed</var> is <code>NULL</code>.
	<li><var>userlistModified</var> - A pointer to a boolean that is <code>true</code> if the userlist contains Bash Tag suggestion message alterations for the specified plugin, and <code>false</code> otherwise.
</ul>

<dfn id="GetDirtyMessage">GetDirtyMessage</dfn> - Outputs the message associated with a dirty mod and whether the mod needs cleaning.
<code class="box">uint32_t <a href="#GetDirtyMessage">GetDirtyMessage</a> (boss_db db, const uint8_t * modName, uint8_t ** message, uint32_t * needsCleaning);</code>
<ul>
	<li><var>db</var> - The database the function acts on.
	<li><var>modName</var> - A string containing the filename of the plugin to look up dirty status information for.
	<li><var>message</var> - A pointer to the outputted dirty message attached to the specified plugin. If the plugin has no dirty message, <var>message</var> will be <code>NULL</code>.
	<li><var>needsCleaning</var> - A pointer to the outputted plugin cleanliness code for the specified plugin.
</ul>

<dfn id="GetPluginMessages">GetPluginMessages</dfn> - Outputs the messages associated with a plugin.
<code class="box">uint32_t <a href="#GetPluginMessages">GetPluginMessages</a> (boss_db db, const uint8_t * plugin, BossMessage ** message, size_t * numMessages);</code>
<ul>
	<li><var>db</var> - The database the function acts on.
	<li><var>plugin</var> - A string containing the filename of the plugin to return the messages of.
	<li><var>messages</var> - A pointer to the outputted array of messages associated with the specified plugin, given as <a href="#BossMessage">BossMessage</a> structures. If the plugin has no messages associated with it, <var>messages</var> will be <code>NULL</code>.
	<li><var>numMessages</var> - A pointer to the size of the <var>messages</var> array. 0 if <var>messages</var> is <code>NULL</code>.
</ul>

<dfn id="IsRecognised">IsRecognised</dfn> - Outputs whether or not a plugin is listed in the masterlist for the database's game.
<code class="box">uint32_t <a href="#IsRecognised">IsRecognised</a> (boss_db db, const uint8_t * plugin, bool * recognised);</code>
<ul>
	<li><var>db</var> - The database the function acts on.
	<li><var>plugin</var> - A string containing the filename of the plugin to look in the masterlist for.
	<li><var>recognised</var> -  A pointer to the boolean output. The output is <code>true</code> if the plugin is present in the masterlist, and <code>false</code> otherwise.
</ul>

<dfn id="DumpMinimal">DumpMinimal</dfn> - Writes a minimal masterlist that only contains mods that have Bash Tag suggestions and/or dirty messages, plus the Tag suggestions and/or dirty messages themselves.
<code class="box">uint32_t <a href="#DumpMinimal">DumpMinimal</a> (boss_db db, const uint8_t * outputFile, const bool overwrite);</code>
<ul>
	<li><var>db</var> - The database the function acts on.
	<li><var>outputFile</var> - A string containing the relative or absolute path to the file to which the minimal masterlist shall be written.
	<li><var>overwrite</var> - If <code>true</code> and <var>outputFile</var> already exists, the existing file will be overwritten. If <code>false</code> and <var>outputFile</var> already exists, no data will be written. Otherwise, data will be written to <var>outputFile</var>.
</ul>


<h2 id="examples">Examples</h2>
<p>Below are (lengthy) code snippets showing examples of how the BOSS API may be used.
<h3 id="examples-c">C++</h3>
<code class="box">
#include &lt;iostream&gt;
#include &lt;stdint.h&gt;
#include &lt;fstream&gt;
#include &lt;clocale&gt;
#include &lt;boost/filesystem/detail/utf8_codecvt_facet.hpp&gt;
#include &lt;boost/filesystem.hpp&gt;

#include "BOSS-API.h"

using namespace std;

int main() {
	//Set the locale to get encoding conversions working correctly.
	setlocale(LC_CTYPE, "");
	locale global_loc = locale();
	locale loc(global_loc, new boost::filesystem::detail::utf8_codecvt_facet());
	boost::filesystem::path::imbue(loc);

	boss_db db;
	uint8_t * mPath = reinterpret_cast&lt;uint8_t *&gt;("Oblivion/masterlist.txt");
	uint8_t * uPath = reinterpret_cast&lt;uint8_t *&gt;("");
	uint8_t * dPath = reinterpret_cast&lt;uint8_t *&gt;("../Data");
	uint32_t game = BOSS_API_GAME_OBLIVION;

	const uint8_t * file = reinterpret_cast&lt;uint8_t *&gt;("minimal.txt");
	const uint8_t * cleanMod = reinterpret_cast&lt;uint8_t *&gt;("All Natural Base.esm");
	const uint8_t * doNotCleanMod = reinterpret_cast&lt;uint8_t *&gt;("bgBalancingEVLAMEAddition.esp");
	const uint8_t * inactiveMod = reinterpret_cast&lt;uint8_t *&gt;("français.esp");
	const uint8_t * messageMod = reinterpret_cast&lt;uint8_t *&gt;("PerkUP-5555.esp");
	const uint8_t * isActiveMod = reinterpret_cast&lt;uint8_t *&gt;("汉语漢語.esp");
	uint8_t ** sortedPlugins;
	uint8_t ** unrecPlugins;
	size_t len;
	uint8_t * message;
	size_t numTagsAdded, numTagsRemoved;
	bool modified;
	uint32_t * tagIDsAdded, * tagIDsRemoved;
	bool active;
	BashTag * BTmap;
	size_t size;
	uint32_t toClean;
	BossMessage * messages;

	uint32_t ret;
	ofstream out("API test.txt");

	out &lt;&lt; "TESTING IsCompatibleVersion(...)" &lt;&lt; endl;
	bool b = IsCompatibleVersion(2,0,0);
	if (b)
		out &lt;&lt; '\t' &lt;&lt; "API is compatible." &lt;&lt; endl;
	else
		out &lt;&lt; '\t' &lt;&lt; "API is incompatible." &lt;&lt; endl;

	out &lt;&lt; "TESTING GetVersionString(...)" &lt;&lt; endl;
	ret = GetVersionString(&amp;message);
	if (ret != BOSS_API_OK)
		out &lt;&lt; '\t' &lt;&lt; "Failed to get version string. Error: " &lt;&lt; ret &lt;&lt; endl;
	else
		out &lt;&lt; '\t' &lt;&lt; "Version: " &lt;&lt; *message &lt;&lt; endl;

	out &lt;&lt; "TESTING CreateBossDb(...)" &lt;&lt; endl;
	ret = CreateBossDb(&amp;db, game, NULL);
	if (ret != BOSS_API_OK)
		out &lt;&lt; '\t' &lt;&lt; "Creation failed. Error: " &lt;&lt; ret &lt;&lt; endl;
	else {
		out &lt;&lt; "TESTING UpdateMasterlist(...)" &lt;&lt; endl;
		ret = UpdateMasterlist(db, mPath);
		if (ret != BOSS_API_OK)
			out &lt;&lt; '\t' &lt;&lt; "Masterlist update failed. Error: " &lt;&lt; ret &lt;&lt; endl;

		out &lt;&lt; "TESTING Load(...)" &lt;&lt; endl;
		ret = Load(db, mPath, NULL);
		if (ret != BOSS_API_OK) {
			uint32_t ret2 = GetLastErrorDetails(&amp;message);
			out &lt;&lt; '\t' &lt;&lt; "Loading failed. Error: " &lt;&lt; ret &lt;&lt; ", " &lt;&lt; ret2 &lt;&lt; ", " &lt;&lt; message &lt;&lt; endl;
		} else {
			out &lt;&lt; "TESTING EvalConditionals(...)" &lt;&lt; endl;
			ret = EvalConditionals(db);
			if (BOSS_API_OK != ret)
				out &lt;&lt; '\t' &lt;&lt; "Conditional evaluation failed. Error: " &lt;&lt; ret &lt;&lt; endl;
			else {
				out &lt;&lt; "TESTING SortMods(...)" &lt;&lt; endl;
				ret = SortMods(db, false, &amp;sortedPlugins, &amp;len, &amp;unrecPlugins, &amp;size);
				if (BOSS_API_OK != ret)
					out &lt;&lt; '\t' &lt;&lt; "Sorting failed. Error: " &lt;&lt; ret &lt;&lt; endl;
				else {
					out &lt;&lt; '\t' &lt;&lt; "List size: " &lt;&lt; len &lt;&lt; endl;
					for (size_t i=0; i&lt;len; i++) {
						out &lt;&lt; '\t' &lt;&lt; '\t' &lt;&lt; i &lt;&lt; " : " &lt;&lt; sortedPlugins[i] &lt;&lt; endl;
					}
					out &lt;&lt; '\t' &lt;&lt; "Unrecognised plugin list size: " &lt;&lt; size &lt;&lt; endl;
					for (size_t i=0; i&lt;size; i++) {
						out &lt;&lt; '\t' &lt;&lt; '\t' &lt;&lt; i &lt;&lt; " : " &lt;&lt; unrecPlugins[i] &lt;&lt; endl;
					}
				}

				out &lt;&lt; "TESTING GetDirtyMessage(...)" &lt;&lt; endl;
				//This should give no dirty message.
				ret = GetDirtyMessage(db, cleanMod, &amp;message, &amp;toClean);
				if (ret != BOSS_API_OK)
					out &lt;&lt; '\t' &lt;&lt; "Failed to get dirty info on \"" &lt;&lt; cleanMod &lt;&lt; "\". Error no " &lt;&lt; ret &lt;&lt; endl;
				else {
					out &lt;&lt; '\t' &lt;&lt; "\"" &lt;&lt; cleanMod &lt;&lt; "\" clean status: " &lt;&lt; toClean &lt;&lt; endl;
					if (message != NULL) {
						out &lt;&lt; '\t' &lt;&lt; "Message: " &lt;&lt; message &lt;&lt; endl;
					}
				}

				out &lt;&lt; "TESTING GetDirtyMessage(...)" &lt;&lt; endl;
				//Now try getting dirty message from one that will have one.
				ret = GetDirtyMessage(db, doNotCleanMod, &amp;message, &amp;toClean);
				if (ret != BOSS_API_OK)
					out &lt;&lt; '\t' &lt;&lt; "Failed to get dirty info on \"" &lt;&lt; doNotCleanMod &lt;&lt; "\". Error no " &lt;&lt; ret &lt;&lt; endl;
				else {
					out &lt;&lt; '\t' &lt;&lt; "\"" &lt;&lt; doNotCleanMod &lt;&lt; "\" clean status: " &lt;&lt; toClean &lt;&lt; endl;
					if (message != NULL) {
						out &lt;&lt; '\t' &lt;&lt; "Message: " &lt;&lt; message &lt;&lt; endl;
					}
				}

				out &lt;&lt; "TESTING DumpMinimal(...)" &lt;&lt; endl;
				ret = DumpMinimal(db, file, true);
				if (ret != BOSS_API_OK)
					out &lt;&lt; '\t' &lt;&lt; "Dump failed. Error no " &lt;&lt; ret &lt;&lt; endl;

				out &lt;&lt; "TESTING GetBashTagMap(...)" &lt;&lt; endl;
				ret = GetBashTagMap(db, &amp;BTmap, &amp;size);
				if (ret != BOSS_API_OK)
					out &lt;&lt; '\t' &lt;&lt; "Failed to get Bash Tag map. Error no " &lt;&lt; ret &lt;&lt; endl;
				else {
					out &lt;&lt; '\t' &lt;&lt; "Tag map size: " &lt;&lt; size &lt;&lt; endl;
					out &lt;&lt; '\t' &lt;&lt; "Bash Tags:" &lt;&lt; endl;
					for (size_t i=0; i&lt;size; i++)
						out &lt;&lt; '\t' &lt;&lt; '\t' &lt;&lt; BTmap[i].id &lt;&lt; " : " &lt;&lt; BTmap[i].name &lt;&lt; endl;
				}

				out &lt;&lt; "TESTING GetModBashTags(...)" &lt;&lt; endl;
				ret = GetModBashTags(db, doNotCleanMod, &amp;tagIDsAdded, &amp;numTagsAdded, &amp;tagIDsRemoved, &amp;numTagsRemoved, &amp;modified);
				if (ret != BOSS_API_OK)
					out &lt;&lt; '\t' &lt;&lt; "Failed to get Bash Tags for \"" &lt;&lt; doNotCleanMod &lt;&lt; "\". Error no " &lt;&lt; ret &lt;&lt; endl;
				else {
					out &lt;&lt; '\t' &lt;&lt; "Tags for \"" &lt;&lt; doNotCleanMod &lt;&lt; "\":" &lt;&lt; endl
						&lt;&lt; '\t' &lt;&lt; '\t' &lt;&lt; "Modified by userlist: " &lt;&lt; modified &lt;&lt; endl
						&lt;&lt; '\t' &lt;&lt; '\t' &lt;&lt; "Number of tags added: " &lt;&lt; numTagsAdded &lt;&lt; endl
						&lt;&lt; '\t' &lt;&lt; '\t' &lt;&lt; "Number of tags removed: " &lt;&lt; numTagsRemoved &lt;&lt; endl
						&lt;&lt; '\t' &lt;&lt; '\t' &lt;&lt; "Tags added:" &lt;&lt; endl;
					for (size_t i=0; i&lt;numTagsAdded; i++)
						out &lt;&lt; '\t' &lt;&lt; '\t' &lt;&lt; tagIDsAdded[i] &lt;&lt; endl;
					out &lt;&lt; '\t' &lt;&lt; '\t' &lt;&lt; "Tags removed:" &lt;&lt; endl;
					for (size_t i=0; i&lt;numTagsRemoved; i++)
						out &lt;&lt; '\t' &lt;&lt; '\t' &lt;&lt; tagIDsRemoved[i] &lt;&lt; endl;
				}

				out &lt;&lt; "TESTING GetLoadOrder(...)" &lt;&lt; endl;
				ret = GetLoadOrder(db, &amp;sortedPlugins, &amp;len);
				if (BOSS_API_OK != ret)
					out &lt;&lt; '\t' &lt;&lt; "GetLoadOrder(...) failed. Error: " &lt;&lt; ret &lt;&lt; endl;
				else {
					out &lt;&lt; '\t' &lt;&lt; "List size: " &lt;&lt; len &lt;&lt; endl;
					for (size_t i=0; i&lt;len; i++) {
						out &lt;&lt; '\t' &lt;&lt; '\t' &lt;&lt; i &lt;&lt; " : " &lt;&lt; sortedPlugins[i] &lt;&lt; endl;
					}
				}

				out &lt;&lt; "TESTING SetLoadOrder(...)" &lt;&lt; endl;
				ret = SetLoadOrder(db, sortedPlugins, len);
				if (BOSS_API_OK != ret)
					out &lt;&lt; '\t' &lt;&lt; "SetLoadOrder(...) failed. Error: " &lt;&lt; ret &lt;&lt; endl;
				else {
					out &lt;&lt; '\t' &lt;&lt; "List size: " &lt;&lt; len &lt;&lt; endl;
					for (size_t i=0; i&lt;len; i++) {
						out &lt;&lt; '\t' &lt;&lt; '\t' &lt;&lt; i &lt;&lt; " : " &lt;&lt; sortedPlugins[i] &lt;&lt; endl;
					}
				}

				out &lt;&lt; "TESTING GetActivePlugins(...)" &lt;&lt; endl;
				ret = GetActivePlugins(db, &amp;sortedPlugins, &amp;len);
				if (BOSS_API_OK != ret)
					out &lt;&lt; '\t' &lt;&lt; "GetActivePlugins(...) failed. Error: " &lt;&lt; ret &lt;&lt; endl;
				else {
					out &lt;&lt; '\t' &lt;&lt; "List size: " &lt;&lt; len &lt;&lt; endl;
					for (size_t i=0; i&lt;len; i++) {
						out &lt;&lt; '\t' &lt;&lt; '\t' &lt;&lt; i &lt;&lt; " : " &lt;&lt; sortedPlugins[i] &lt;&lt; endl;
					}
				}

				out &lt;&lt; "TESTING SetActivePlugins(...)" &lt;&lt; endl;
				ret = SetActivePlugins(db, sortedPlugins, len);
				if (BOSS_API_OK != ret)
					out &lt;&lt; '\t' &lt;&lt; "SetActivePlugins(...) failed. Error: " &lt;&lt; ret &lt;&lt; endl;
				else {
					out &lt;&lt; '\t' &lt;&lt; "List size: " &lt;&lt; len &lt;&lt; endl;
					for (size_t i=0; i&lt;len; i++) {
						out &lt;&lt; '\t' &lt;&lt; '\t' &lt;&lt; i &lt;&lt; " : " &lt;&lt; sortedPlugins[i] &lt;&lt; endl;
					}
				}

				out &lt;&lt; "TESTING GetPluginLoadOrder(...)" &lt;&lt; endl;
				ret = GetPluginLoadOrder(db, doNotCleanMod, &amp;len);
				if (BOSS_API_OK != ret)
					out &lt;&lt; '\t' &lt;&lt; "GetPluginLoadOrder(...) failed. Error: " &lt;&lt; ret &lt;&lt; endl;
				else {
					out &lt;&lt; '\t' &lt;&lt; "\"" &lt;&lt; doNotCleanMod &lt;&lt; "\" position: " &lt;&lt; len &lt;&lt; endl;
				}

				out &lt;&lt; "TESTING SetPluginLoadOrder(...)" &lt;&lt; endl;
				len = 1;
				ret = SetPluginLoadOrder(db, doNotCleanMod, len);
				if (BOSS_API_OK != ret)
					out &lt;&lt; '\t' &lt;&lt; "SetPluginLoadOrder(...) failed. Error: " &lt;&lt; ret &lt;&lt; endl;
				else {
					out &lt;&lt; '\t' &lt;&lt; "\"" &lt;&lt; doNotCleanMod &lt;&lt; "\" set position: " &lt;&lt; len &lt;&lt; endl;
				}

				out &lt;&lt; "TESTING GetIndexedPlugin(...)" &lt;&lt; endl;
				len = 10;
				ret = GetIndexedPlugin(db, len, &amp;message);
				if (BOSS_API_OK != ret)
					out &lt;&lt; '\t' &lt;&lt; "GetIndexedPlugin(...) failed. Error: " &lt;&lt; ret &lt;&lt; endl;
				else {
					out &lt;&lt; '\t' &lt;&lt; "Plugin at position " &lt;&lt; len &lt;&lt; " : " &lt;&lt; message &lt;&lt; endl;
				}

				out &lt;&lt; "TESTING GetPluginMessages(...)" &lt;&lt; endl;
				ret = GetPluginMessages(db, messageMod, &amp;messages, &amp;len);
				if (BOSS_API_OK != ret)
					out &lt;&lt; '\t' &lt;&lt; "GetIndexedPlugin(...) failed. Error: " &lt;&lt; ret &lt;&lt; endl;
				else {
					out &lt;&lt; '\t' &lt;&lt; "Message array size: " &lt;&lt; size &lt;&lt; endl;
					out &lt;&lt; '\t' &lt;&lt; "Messages:" &lt;&lt; endl;
					for (size_t i=0; i&lt;len; i++)
						out &lt;&lt; '\t' &lt;&lt; '\t' &lt;&lt; messages[i].type &lt;&lt; " : " &lt;&lt; messages[i].message &lt;&lt; endl;
				}

				//Assume there are at least 3 plugins.
				out &lt;&lt; "TESTING SetPluginActive(...)" &lt;&lt; endl;
				ret = SetPluginActive(db, sortedPlugins[2], true);
				if (BOSS_API_OK != ret)
					out &lt;&lt; '\t' &lt;&lt; "SetPluginActive(...) failed. Error: " &lt;&lt; ret &lt;&lt; endl;
				else {
					out &lt;&lt; '\t' &lt;&lt; "\"" &lt;&lt; sortedPlugins[2] &lt;&lt; "\" activated." &lt;&lt; endl;
				}

				//Assume there are at least 3 plugins.
				out &lt;&lt; "TESTING IsPluginActive(...)" &lt;&lt; endl;
				ret = IsPluginActive(db, sortedPlugins[2], &amp;active);
				if (BOSS_API_OK != ret)
					out &lt;&lt; '\t' &lt;&lt; "IsPluginActive(...) failed. Error: " &lt;&lt; ret &lt;&lt; endl;
				else {
					out &lt;&lt; '\t' &lt;&lt; "\"" &lt;&lt; sortedPlugins[2] &lt;&lt; "\" active status: " &lt;&lt; active &lt;&lt; endl;
				}

				out &lt;&lt; "TESTING IsPluginMaster(...)" &lt;&lt; endl;
				ret = IsPluginMaster(db, cleanMod, &amp;active);
				if (BOSS_API_OK != ret)
					out &lt;&lt; '\t' &lt;&lt; "IsPluginMaster(...) failed. Error: " &lt;&lt; ret &lt;&lt; endl;
				else if (active)
					out &lt;&lt; '\t' &lt;&lt; "\"" &lt;&lt; cleanMod &lt;&lt; "\" is a master." &lt;&lt; endl;
				else
					out &lt;&lt; '\t' &lt;&lt; "\"" &lt;&lt; cleanMod &lt;&lt; "\" is not a master." &lt;&lt; endl;

				out &lt;&lt; "TESTING IsPluginMaster(...)" &lt;&lt; endl;
				ret = IsPluginMaster(db, doNotCleanMod, &amp;active);
				if (BOSS_API_OK != ret)
					out &lt;&lt; '\t' &lt;&lt; "IsPluginMaster(...) failed. Error: " &lt;&lt; ret &lt;&lt; endl;
				else if (active)
					out &lt;&lt; '\t' &lt;&lt; "\"" &lt;&lt; doNotCleanMod &lt;&lt; "\" is a master." &lt;&lt; endl;
				else
					out &lt;&lt; '\t' &lt;&lt; "\"" &lt;&lt; doNotCleanMod &lt;&lt; "\" is not a master." &lt;&lt; endl;
			}
		}

		DestroyBossDb(db);
	}

	out.close();
	return 0;
}
</code>

<h2 id="contact">Contact</h2>
<p>Contact information for the BOSS Development Team may be found in the <q><a href="BOSS%20ReadMe.html#members">Project Members</a></q> section of the main BOSS readme. For API-specific support it is best to contact WrinklyNinja, who played a large role in setting up the textfile-based load order standard, created the API, and is currently responsible for BOSS code development.

<h2 id="credits">Credits</h2>
<p>Credit goes to myk002 and Lojack for significant contributions to the API's development from initial template submission through to beta testing. Credit also goes to kaburke for his contribution to the beta testing of the API.
<p>The BOSS API is written in C/C++ and makes use of the <a href="http://www.boost.org/">Boost</a>, <a href="http://curl.haxx.se/libcurl/">libcurl</a> and <a href="http://utfcpp.sourceforge.net/">UTF8-CPP</a> libraries.

<h2 id="license">License</h2>
<p>This document is part of the BOSS documentation.
<br />Copyright (C) 2012 BOSS Development Team.
<br />See the file <q>BOSS ReadMe.html</q> for copying conditions.